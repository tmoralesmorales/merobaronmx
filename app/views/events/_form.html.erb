  <script src="//maps.google.com/maps/api/js?v=3.23&sensor=false&client=&key=AIzaSyDY7df7go2v42v6ln3MYok3Tc2_Yti2TEk&libraries=places&language=es&hl=&region=mx"></script> 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.10.4/dist/typeahead.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/typeahead-addresspicker/0.1.4/typeahead-addresspicker.min.js"></script>
 
 <style>
 
 
 /* aqui termina el mdl*/
 
 /* FINALIZA ANGULAR MATERIAL */



.container {
  max-width: 750px;
  margin: 0 auto;
  text-align: center;
}

.tt-dropdown-menu,
.gist {
  text-align: left;
}

code {
  margin: 0;
  border: 1px solid #ddd;
  background-color: #f8f8f8;
  border-radius: 3px;
  max-width: 100%;
  display: inline-block;
  overflow: auto;
  vertical-align: middle;
  line-height: 1.3;
  padding: 2px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
  font-size: 14px;
}
/* base styles */
/* ----------- */



.typeahead,
.tt-query,
.tt-hint {
  width: 100%;
  height: 30px;
  padding: 8px 12px;
  font-size: 24px;
  line-height: 30px;
  border: 2px solid #ccc;
  -webkit-border-radius: 8px;
     -moz-border-radius: 8px;
          border-radius: 8px;
  outline: none;
}

.typeahead {
  background-color: #fff;
}

.typeahead:focus {
  border: 2px solid #0097cf;
}
.typeahead.empty {
  border: 2px solid red;
}
.tt-query {
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
     -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
}

.tt-hint {
  color: #999;
  width: 430px;
}

.tt-dropdown-menu {
  width: 422px;
  margin-top: 12px;
  padding: 8px 0;
  background-color: #fff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -webkit-border-radius: 8px;
     -moz-border-radius: 8px;
          border-radius: 8px;
  -webkit-box-shadow: 0 5px 10px rgba(0,0,0,.2);
     -moz-box-shadow: 0 5px 10px rgba(0,0,0,.2);
          box-shadow: 0 5px 10px rgba(0,0,0,.2);
}

.tt-suggestion {
  padding: 3px 20px;
  font-size: 18px;
  line-height: 24px;
}

.tt-suggestion.tt-cursor {
  color: #fff;
  background-color: #0097cf;

}

.tt-suggestion p {
  margin: 0;
}

.gist {
  font-size: 14px;
}

#main {
  width: 1000px;
  margin: 10px auto;
}
#mapi {
  
  width: 100%;
  height: 300px;
  border: 1px solid #DDD;
}
.address-panel {
 
  width: 430px;

}
.typeahead {
  width: 405px;
}

pre.response {
  float:left;
  width: 430px;
  height: 400px;
  border: 1px solid #DDD;
  font-size: 12px;
  overflow: scroll;
}
 </style>
 
  <nav class="white" role="navigation">
    <div class="nav-wrapper container">
      <a id="logo-container" href="#" class="brand-logo">previnien.do</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="/events/new">Reporte anónimo</a></li>
        <li><a href="#">Monitorear una zona</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <li><a href="/events/new">Reporte anónimo</a></li>
        <li><a href="#">Monitorear una zona</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>
        
 
 
 

<%= form_for(@event) do |f| %>
  <% if @event.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@event.errors.count, "error") %> prohibited this event from being saved:</h2>

      <ul>
      <% @event.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
     <div class="container">
  
          <h3>Reporte anónimo</h3>
     
                <h4>Escriba el lugar donde ocurrió el incidente</h4>
                
                <div class="select">
                  <%= f.label :'Dirección' %>
                  <%= f.select :type, options_for_select([["Select One", ""],
                  "Cell", "Work", "Office", "Home", "Other"]) %>
                </div>
              
  
                         
                  <div class="address-panel">
                    <input id="address2" class="typeahead" type="text" placeholder="Escriba la calle o lugar">
                   
                  </div>
                  <div id="mapi"></div>
                  
                <div class="row">
                  <div class="input-field col s12">
                  
                    <%= f.label :'Dirección' %>
                    <%= f.text_field :location, readonly:"true", placeholder:"" %>
                  
                  </div>
                </div>
                  
                  <div class="row">
                        <div class="input-field col s4">
                       
                          <%= f.label :'Latitud' %>
                          <%= f.text_field :lat, readonly:"true", placeholder:"" %>
                        
                        </div>
                        <div class="input-field col s4">
                        
                          <%= f.label :'Longitud' %>
                          <%= f.text_field :lng, readonly:"true", placeholder:"" %>
                        
                      </div>
                      <div class="input-field col s4">
                        
                            <%= f.label :'Colonia/Barrio/Localidad' %>
                            <%= f.text_field :zone, readonly:"true", placeholder:"" %>
                       
                      </div>
                    </div>
                    
                    <div class="row">
                      <div class="input-field col s6">
                        
                          <%= f.label :'Municipio/Delegación'  %>
                          <%= f.text_field :city, readonly:"true", placeholder:"" %>
                       
                    </div>
                    <div class="input-field col s4">
                       
                         <%= f.label :'Entidad federativa' %>
                         <%= f.text_field :state, readonly:"true", placeholder:"" %>
                        
                    </div>
                    <div class="input-field col s2">
                      
                          <%= f.label :'Código postal' %>
                          <%= f.text_field :zip,  readonly:"true", placeholder:""%>
                        
                    </div>
                   </div>
                     

                    <h5>Proporciona detalles del incidente</h5>
                    <div class="row">
                      <div class="input-field col s12">
                        <%= f.label :'Describa brevemente el evento'  %>
                        <%= f.text_field :title, class:"validate" %>
                      </div>
                    </div>   
                    
                 
                  
                    
              <div class="input-field col s12rowser-default">
                <select class='browser-default'>
                  <option value="" disabled selected>Tipo de evento</option>
                   <optgroup label="Personal">
                    <option value="1">Robo sin violencia</option>
                    <option value="2">Asalto a mano armada</option>
                    <option value="2">Intento de asalto</option>
                    <option value="3">Secuestro express</option>
                    </optgroup>
                    <optgroup label="Vehículo">
                      <option value="1">Robo total sin violencia</option>
                      <option value="1">Robo total con violencia</option>
                      <option value="1">Robo parcial sin violencia (Rotura de cristal)</option>
                      <option value="1">Robo parcial con violencia (Asalto estando en el vehículo)</option>
                    </optgroup> 
                    <optgroup label="Casa habitación">
                      <option value="1">Robo a casa habitación</option>
                      </optgroup> 
                    <optgroup label="Negocio">
                      <option value="1">Robo a casa habitación</option>
                </select>
                
              </div>
              <div class="select">
               <%= f.select :type, options_for_select([["Select One", ""],
               "Cell", "Work", "Office", "Home", "Other"]), :class => 'browser-default' %>
               </div>
              
              <%= f.label :type %><br>
                <%= f.text_field :type %>
              <div class="field">
                <%= f.label :description %><br>
                <%= f.text_field :description %>
              </div>
              <div class="field">
                <%= f.label :items %><br>
                <%= f.text_field :items %>
              </div>
              <div class="field">
                <%= f.label :month %><br>
                <%= f.month_field :month %>
              </div>
              <div class="field">
                <%= f.label :day %><br>
                <%= f.number_field :day %>
              </div>
              <div class="field">
                <%= f.label :year %><br>
                <%= f.number_field :year %>
              </div>
              <div class="field">
                <%= f.label :hour %><br>
                <%= f.time_field :hour %>
              </div>
              <div class="field">
                <%= f.label :loss %><br>
                <%= f.text_field :loss %>
              </div>
              <div class="field">
                <%= f.label :sex %><br>
                <%= f.text_field :sex %>
              </div>
              <div class="field">
                <%= f.label :age %><br>
                <%= f.text_field :age %>
              </div>
              <div class="field">
                <%= f.label :report %><br>
                <%= f.text_field :report %>
              </div>
              <div class="field">
                <%= f.label :user_id %><br>
                <%= f.text_field :user_id %>
              </div>
              <div class="actions">
               
                
                
                
                <%= f.submit %>
                
                 <% end %>
            
            <%= link_to 'Back', events_path %>
            
                        
              </div>
              
                      
                  
                
                
                
                
                Dolore ex deserunt aute fugiat aute nulla ea sunt aliqua nisi cupidatat eu. Nostrud in laboris labore nisi amet do dolor eu fugiat consectetur elit cillum esse. Pariatur occaecat nisi laboris tempor laboris eiusmod qui id Lorem esse commodo in. Exercitation aute dolore deserunt culpa consequat elit labore incididunt elit anim.
              </div>
              <div class="mdl-card__actions">
                <a href="#" class="mdl-button">Enviar reporte</a>
              </div>
            </div>
            
            
             
              
              
              
                </div>
              </div>
           
        
       
        </div>
      
        
        
  
  
 
      
<script type="text/javascript">


$(':input')
 
  $( function() {
    // instantiate the addressPicker suggestion engine (based on bloodhound)
    var addressPicker = new AddressPicker({
    map:
      {id: '#mapi', 
      center: {lat:19.432666, lng: -99.1324396}},
    marker: {
      draggable: true,
      visible: true,
      },
    zoomForLocation: 17, reverseGeocoding: true,
       autocompleteService: {
        componentRestrictions: { country: 'MX' }}
    
    });
    // instantiate the typeahead UI
    $('#address2').typeahead(null, {
      displayKey: 'description',
      source: addressPicker.ttAdapter()
    });
    addressPicker.bindDefaultTypeaheadEvent($('#address2'))
    $(addressPicker).on('addresspicker:selected', function (event, result) {
     
      $("input#event_lat").val(result.lat());
      $("input#event_lng").val(result.lng());
      $("input#event_location").val(result.address());
      $("input#event_zone").val(result.nameForType('political'));
      if (result.nameForType('administrative_area_level_2') != ''){
        $("input#event_city").val(result.nameForType('administrative_area_level_2'));

      } else {
        $("input#event_city").val(result.nameForType('administrative_area_level_3'));
      }
      //$("input#event_city").val(result.nameForType('administrative_area_level_2')+result.nameForType('administrative_area_level_3'));
      $("input#event_state").val(result.nameForType('administrative_area_level_1'));
      $("input#event_zip").val(result.nameForType('postal_code'));
        
     
      if (result.isReverseGeocoding()) {
        $('#address2').val(result.address())
      }
      
    });
  })
  
 
  
</script>


        
        
    
  
  